---
layout: post
title: Un premier pas dans le Développement Dirigé par les Tests
subtitle: Ou comment apprendre le TDD
category: lesmainsdanslecambouis
tags: tdd regex
feature-image: 2015-08-19-TDD_feature-image.png
---

Vous entendez souvent parler de TDD mais n'avez jamais osé demander ce que c'était ? Vos collègues se marrent autour de la fontaine à eau parce qu'ils n'arrivent pas à faire échouer un test ? Vous ne comprenez pas pourquoi ils tiennent absolument à avoir un test qui échoue ? Votre voisin rouscaille parce qu'il subit des régressions alors que tous les tests de l'application sont au vert ? Cet article est fait pour vous.

> C'est quoi, le **TDD** ?

Le **TDD**, ou **DDT** en bon françois (**Développement dirigé par les tests**), est une pratique de développement dans laquelle aucun code applicatif n'est produit avant d'avoir écrit un test qui échoue. Pas n'importe quel test, ne me faîtes pas dire ce que je n'ai pas dit. Un test qui met en évidence un bug, ou une fonctionnalité manquante.

Le pratiquant du TDD, lorsqu'il a besoin d'écrire du code, passera forcément par la case "écriture d'un test unitaire qui échoue". Lorsqu'il a ce cas de test qui reproduit le bug ou le manque fonctionnel, et qu'il constate que le test en question est en échec, il peut alors commencer à réaliser le code applicatif pour faire en sorte que le test passe. Et uniquement le code nécessaire à ça. Pas plus. Non, pas une ligne de plus.

Lorsqu'il a écrit le minimum de code utile à faire réussir son test, il peut passer par une étape de **refactoring** (ou **remaniement** en bon françois). Il retravaille son code pour faire en sorte qu'il soit le plus propre possible, toujours en s'assurant que le test qu'il a écrit continue de réussir.

> A quoi ça sert, le **TDD** ?

Le **TDD** présente quatre gros avantages.

Il assure d'avoir une couverture de tests aussi complète que nécessaire (tout bout de code applicatif sera surveillé par un test). De ce fait, les régressions sont sous bonne garde, et toute évolution sera donc bien plud confortable à effectuer. Un développeur n'aura plus la crainte de mettre à genou la moitié de l'application en corrigeant un malheureux bug dans un sous-module de l'application. On assure ici une sécurité quand aux évolutions et corrections de l'application.

Le **TDD** évite également l'anti-patron du **tas de code**, ou encore le phénomène du "lancer de lignes de code jusqu'à étouffement du bug". Cela évite d'écrire une dizaines de lignes, alors que seule la dernière d'entre elles corrige effectivement le problème.

Cette pratique a également le mérite de simplifier le code produit. Etant donné que le test est écrit en premier, le développeur s'efforce d'écrire une **API** claire et facile à utiliser. Le test est écrit de telle façon que la classe à tester est conçue pour être simple à utiliser. Le développeur écrit son code de test de la façon qu'il souhaite voir la classe fonctionner, au lieu d'avoir à tordre le code de test pour répondre à la difficulté d'utiliser une classe mal dessinée.

Enfin, le TDD sert de mode d'emploi. Le code de test d'une classe est simple, ce qui permet à un utilisateur ultérieur de la classe de comprendre de quelle façon il faut l'instancier et l'utiliser.

> Ca a l'air chouette, ton truc, mais comment ça marche ?

